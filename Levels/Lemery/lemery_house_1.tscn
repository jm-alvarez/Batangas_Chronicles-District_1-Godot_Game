[gd_scene load_steps=30 format=3 uid="uid://boqbu3by2h6ni"]

[ext_resource type="Script" uid="uid://hleopof7wt6t" path="res://Levels/Scripts/level.gd" id="1_qmm4v"]
[ext_resource type="PackedScene" uid="uid://bqu1q2bhv0qmb" path="res://Tilemaps/house_tilemap.tscn" id="2_8ebq8"]
[ext_resource type="PackedScene" uid="uid://pb152kmqfih2" path="res://Levels/PlayerSpawn.tscn" id="3_gjkfd"]
[ext_resource type="Texture2D" uid="uid://vjtp5f7opf4t" path="res://Levels/sample/Scene1/Sprites/Aki_Sleeping-Sheet-export.png" id="4_3035u"]
[ext_resource type="Texture2D" uid="uid://dfvtstvr7mr66" path="res://Levels/sample/Scene1/Sprites/Cabinet-Sheet.png" id="5_wjgo5"]
[ext_resource type="Script" uid="uid://6im7on6coqur" path="res://Quests/UtilityNode/quest_activated_switch.gd" id="6_71jsi"]
[ext_resource type="PackedScene" uid="uid://cnqkqeyxokar0" path="res://GeneralNodes/AreaTrigger/area_trigger.tscn" id="6_a0pwa"]
[ext_resource type="Resource" uid="uid://b1v7kryetpukb" path="res://Quests/Lemery1.tres" id="7_g5da4"]
[ext_resource type="Script" uid="uid://bsglisl288k4l" path="res://Interactables/Dialog/Scripts/dialog_interaction.gd" id="7_r1kyu"]
[ext_resource type="Texture2D" uid="uid://bqhokb3lcnmtq" path="res://Interactables/Dialog/Sprites/interaction.png" id="8_xl7aj"]
[ext_resource type="Script" uid="uid://6rr3xn6vbfwp" path="res://Interactables/Dialog/Scripts/dialog_text.gd" id="9_71jsi"]
[ext_resource type="Resource" uid="uid://bm5kxl4uu4v23" path="res://NPC/00-NPC/npc_001.tres" id="10_g5da4"]
[ext_resource type="PackedScene" uid="uid://kbou30pi4scj" path="res://Levels/LevelTransition.tscn" id="11_r1kyu"]
[ext_resource type="PackedScene" uid="uid://dd5pssvoqphnd" path="res://Quests/UtilityNode/quest_advance_trigger.tscn" id="13_g5da4"]

[sub_resource type="RectangleShape2D" id="RectangleShape2D_g5da4"]
resource_local_to_scene = true
size = Vector2(16, 16)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_02vr8"]
size = Vector2(16, 10)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_xs081"]
size = Vector2(28, 40)

[sub_resource type="Animation" id="Animation_y5si0"]
length = 0.001
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Sprite2D:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [0]
}

[sub_resource type="Animation" id="Animation_qtpts"]
resource_name = "aki_sleep"
length = 1.4
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Sprite2D:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.2, 0.4, 0.6, 0.8, 1, 1.2),
"transitions": PackedFloat32Array(1, 1, 1, 1, 1, 1, 1),
"update": 1,
"values": [0, 1, 2, 3, 4, 4, 6]
}

[sub_resource type="Animation" id="Animation_no7xn"]
resource_name = "aki_wakeup"
length = 1.4
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Sprite2D:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.2, 0.4, 0.6, 0.8, 1, 1.2),
"transitions": PackedFloat32Array(1, 1, 1, 1, 1, 1, 1),
"update": 1,
"values": [6, 5, 4, 3, 2, 1, 0]
}

[sub_resource type="Animation" id="Animation_r8q3p"]
resource_name = "default"
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Sprite2D:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [0]
}

[sub_resource type="AnimationLibrary" id="AnimationLibrary_pm6cj"]
_data = {
&"RESET": SubResource("Animation_y5si0"),
&"aki_sleep": SubResource("Animation_qtpts"),
&"aki_wakeup": SubResource("Animation_no7xn"),
&"default": SubResource("Animation_r8q3p")
}

[sub_resource type="RectangleShape2D" id="RectangleShape2D_kbrsh"]
size = Vector2(20, 6.6666718)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_r7qpt"]
size = Vector2(52, 54)

[sub_resource type="Animation" id="Animation_evnrb"]
resource_name = "default"
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Sprite2D:modulate")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Color(1, 1, 1, 0)]
}

[sub_resource type="Animation" id="Animation_crptm"]
resource_name = "hide"
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Sprite2D:modulate")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 1),
"transitions": PackedFloat32Array(1, 1),
"update": 0,
"values": [Color(1, 1, 1, 1), Color(1, 1, 1, 0)]
}

[sub_resource type="Animation" id="Animation_rxcv5"]
resource_name = "show"
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Sprite2D:modulate")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 1),
"transitions": PackedFloat32Array(1, 1),
"update": 0,
"values": [Color(1, 1, 1, 0), Color(1, 1, 1, 1)]
}

[sub_resource type="AnimationLibrary" id="AnimationLibrary_pem66"]
_data = {
&"default": SubResource("Animation_evnrb"),
&"hide": SubResource("Animation_crptm"),
&"show": SubResource("Animation_rxcv5")
}

[sub_resource type="RectangleShape2D" id="RectangleShape2D_r1kyu"]
size = Vector2(20, 4)

[node name="lemery_house_1" type="Node2D"]
script = ExtResource("1_qmm4v")

[node name="QuestActivatedSwitch2" type="Node2D" parent="."]
position = Vector2(8, -2)
script = ExtResource("6_71jsi")
react_to_global_signal = true
linked_quest = ExtResource("7_g5da4")
quest_step = 1
settings_summary = "UPDATE QUEST:
 Quest: Where am I?
Checking if player has quest"
metadata/_custom_type_script = "uid://6im7on6coqur"

[node name="LevelTransition" parent="QuestActivatedSwitch2" instance=ExtResource("11_r1kyu")]
position = Vector2(-80, 800)
scale = Vector2(1, 0.16000003)
level = "uid://dafnhgj0rysap"
target_transition_area = "Lemery_Outside"
size = 1
side = 3

[node name="CollisionShape2D" parent="QuestActivatedSwitch2/LevelTransition" index="0"]
position = Vector2(0, 8)
shape = SubResource("RectangleShape2D_g5da4")

[node name="area_trigger" parent="QuestActivatedSwitch2/LevelTransition" instance=ExtResource("6_a0pwa")]

[node name="CollisionShape2D" type="CollisionShape2D" parent="QuestActivatedSwitch2/LevelTransition/area_trigger"]
position = Vector2(0, 5)
shape = SubResource("RectangleShape2D_02vr8")

[node name="quest_advance_trigger" parent="QuestActivatedSwitch2/LevelTransition/area_trigger" instance=ExtResource("13_g5da4")]
signal_name = "player_entered"
linked_quest = ExtResource("7_g5da4")
quest_step = 1
settings_summary = "UPDATE QUEST:
 Quest: Where am I?
Step: 1 - explore the house, and go outside to look for the unknown woman..
Complete: false"

[node name="house" parent="." instance=ExtResource("2_8ebq8")]
layer_0/tile_data = PackedInt32Array(2686969, 196612, 1, 2752505, 196612, 1, 2818041, 196612, 1, 2883577, 196612, 1, 2949113, 196612, 1, 3014649, 196612, 1, 3080185, 196612, 1, 3145721, 196612, 1, 3211257, 196612, 1, 3276793, 196612, 2, 2686970, 262148, 1, 2752506, 262148, 1, 2818042, 262148, 1, 2883578, 262148, 1, 2949114, 262148, 1, 3014650, 262148, 1, 3080186, 262148, 1, 3145722, 262148, 1, 3211258, 262148, 1, 3276794, 393220, 0, 2686971, 262148, 1, 2752507, 262148, 1, 2818043, 262148, 1, 2883579, 262148, 1, 2949115, 262148, 1, 3014651, 262148, 1, 3080187, 262148, 1, 3145723, 262148, 1, 3211259, 262148, 1, 3276795, 458756, 0, 2621433, 4, 1, 2621434, 65540, 1, 2621435, 65540, 1, 2686972, 262148, 1, 2752508, 262148, 1, 2818044, 262148, 1, 2883580, 262148, 1, 2949116, 262148, 1, 3014652, 262148, 1, 3080188, 262148, 1, 3145724, 262148, 1, 3211260, 262148, 1, 3276796, 524292, 0, 2686973, 262148, 1, 2752509, 262148, 1, 2818045, 262148, 1, 2883581, 262148, 1, 2949117, 262148, 1, 3014653, 262148, 1, 3080189, 262148, 1, 3145725, 262148, 1, 3211261, 262148, 1, 3276797, 262148, 2, 2686974, 262148, 1, 2752510, 262148, 1, 2818046, 262148, 1, 2883582, 262148, 1, 2949118, 262148, 1, 3014654, 262148, 1, 3080190, 262148, 1, 3145726, 262148, 1, 3211262, 262148, 1, 3276798, 262148, 2, 2686975, 262148, 1, 2752511, 262148, 1, 2818047, 262148, 1, 2883583, 262148, 1, 2949119, 262148, 1, 3014655, 262148, 1, 3080191, 262148, 1, 3145727, 262148, 1, 3211263, 262148, 1, 3276799, 262148, 2, 2621440, 262148, 1, 2686976, 262148, 1, 2752512, 262148, 1, 2818048, 262148, 1, 2883584, 262148, 1, 2949120, 262148, 1, 3014656, 262148, 1, 3080192, 262148, 1, 3145728, 262148, 1, 3211264, 262148, 2, 2621441, 196612, 1, 2686977, 262148, 1, 2752513, 196612, 1, 2818049, 262148, 0, 2883585, 262148, 4, 2949121, 262148, 5, 3014657, 262148, 1, 3080193, 262148, 1, 3145729, 262148, 1, 3211265, 262148, 2, 2621442, 262148, 1, 2686978, 262148, 1, 2752514, 262148, 1, 2818050, 262148, 0, 2883586, 262148, 4, 2949122, 262148, 5, 3014658, 262148, 1, 3080194, 262148, 1, 3145730, 262148, 1, 3211266, 262148, 2, 2621443, 262148, 1, 2686979, 262148, 1, 2752515, 262148, 1, 2818051, 262148, 0, 2883587, 262148, 4, 2949123, 262148, 5, 3014659, 262148, 1, 3080195, 262148, 1, 3145731, 262148, 1, 3211267, 262148, 2, 2621444, 262148, 1, 2686980, 262148, 1, 2752516, 262148, 1, 2818052, 262148, 0, 2883588, 262148, 4, 2949124, 262148, 5, 3014660, 262148, 1, 3080196, 262148, 1, 3145732, 262148, 1, 3211268, 262148, 2, 2621445, 262148, 1, 2686981, 262148, 1, 2752517, 262148, 1, 2818053, 262148, 0, 2883589, 262148, 4, 2949125, 262148, 5, 3014661, 262148, 1, 3080197, 262148, 1, 3145733, 262148, 1, 3211269, 262148, 2, 2621446, 262148, 1, 2686982, 262148, 1, 2752518, 262148, 1, 2818054, 262148, 0, 2883590, 262148, 4, 2949126, 262148, 5, 3014662, 262148, 1, 3080198, 262148, 1, 3145734, 262148, 1, 3211270, 262148, 2, 2555897, 196612, 4, 2555898, 262148, 4, 2555899, 262148, 4, 2555900, 262148, 4, 2621436, 65540, 1, 2555901, 262148, 4, 2621437, 65540, 1, 2555902, 262148, 4, 2621438, 65540, 1, 2555903, 262148, 4, 2621439, 65540, 1, 2490368, 262148, 4, 2555904, 65540, 1, 2490369, 196612, 4, 2555905, 4, 1, 2490370, 262148, 4, 2555906, 65540, 1, 2490371, 262148, 4, 2555907, 65540, 1, 2490372, 262148, 4, 2555908, 65540, 1, 2490373, 262148, 4, 2555909, 65540, 1, 2490374, 262148, 4, 2555910, 65540, 1, 2424825, 196612, 0, 2490361, 196612, 4, 2424826, 262148, 0, 2490362, 262148, 4, 2424827, 262148, 0, 2490363, 262148, 4, 2424828, 262148, 0, 2490364, 262148, 4, 2424829, 262148, 0, 2490365, 262148, 4, 2424830, 262148, 0, 2490366, 262148, 4, 2424831, 262148, 0, 2490367, 262148, 4, 2359296, 262148, 0, 2424832, 262148, 4, 2359297, 196612, 0, 2424833, 196612, 4, 2359298, 262148, 0, 2424834, 262148, 4, 2359299, 262148, 0, 2424835, 262148, 4, 2359300, 262148, 0, 2424836, 262148, 4, 2359301, 262148, 0, 2424837, 262148, 4, 2359302, 262148, 0, 2424838, 262148, 4, 2359303, 327684, 0, 2424839, 327684, 4, 2490375, 327684, 4, 2555911, 131076, 1, 2621447, 327684, 1, 2686983, 327684, 1, 2752519, 327684, 1, 2818055, 327684, 0, 2883591, 327684, 4, 2949127, 327684, 5, 3014663, 327684, 1, 3080199, 327684, 1, 3145735, 327684, 1, 3211271, 327684, 2)

[node name="PlayerSpawn" parent="." instance=ExtResource("3_gjkfd")]
position = Vector2(74, 647)

[node name="Bed" type="StaticBody2D" parent="."]
z_index = 1
y_sort_enabled = true
position = Vector2(109, 635)
scale = Vector2(-1, 1)
collision_layer = 16
collision_mask = 16

[node name="Sprite2D" type="Sprite2D" parent="Bed"]
texture = ExtResource("4_3035u")
hframes = 7

[node name="CollisionShape2D" type="CollisionShape2D" parent="Bed"]
position = Vector2(0, 8)
shape = SubResource("RectangleShape2D_xs081")
debug_color = Color(1, 0, 0, 0.498039)

[node name="AnimationPlayer" type="AnimationPlayer" parent="Bed"]
libraries = {
&"": SubResource("AnimationLibrary_pm6cj")
}

[node name="StaticBody2D" type="StaticBody2D" parent="."]
position = Vector2(79, 616)
scale = Vector2(1.5, 1.5)
collision_layer = 16
collision_mask = 0

[node name="Sprite2D" type="Sprite2D" parent="StaticBody2D"]
texture = ExtResource("5_wjgo5")
hframes = 2

[node name="CollisionShape2D" type="CollisionShape2D" parent="StaticBody2D"]
position = Vector2(0, 7.3333435)
shape = SubResource("RectangleShape2D_kbrsh")

[node name="QuestActivatedSwitch" type="Node2D" parent="."]
script = ExtResource("6_71jsi")
remove_when_activated = true
react_to_global_signal = true
linked_quest = ExtResource("7_g5da4")
settings_summary = "UPDATE QUEST:
 Quest: Where am I?
Checking if player has quest"
metadata/_custom_type_script = "uid://6im7on6coqur"

[node name="LevelTransition" parent="QuestActivatedSwitch" instance=ExtResource("11_r1kyu")]
position = Vector2(80, 636)
scale = Vector2(0.6237307, 0.13151558)
level = "uid://d2q3oa8rkteby"
side = 2

[node name="area_trigger" parent="QuestActivatedSwitch" instance=ExtResource("6_a0pwa")]
position = Vector2(79, 646)

[node name="CollisionShape2D" type="CollisionShape2D" parent="QuestActivatedSwitch/area_trigger"]
position = Vector2(-12, 14)
shape = SubResource("RectangleShape2D_r7qpt")

[node name="dialog_interaction" type="Area2D" parent="QuestActivatedSwitch/area_trigger"]
process_mode = 3
collision_layer = 0
collision_mask = 4
monitorable = false
script = ExtResource("7_r1kyu")

[node name="Sprite2D" type="Sprite2D" parent="QuestActivatedSwitch/area_trigger/dialog_interaction"]
visible = false
position = Vector2(0, -29)
texture = ExtResource("8_xl7aj")
hframes = 2

[node name="AnimationPlayer" type="AnimationPlayer" parent="QuestActivatedSwitch/area_trigger/dialog_interaction"]
process_mode = 3
libraries = {
&"": SubResource("AnimationLibrary_pem66")
}
autoplay = "default"

[node name="DialogText" type="Node" parent="QuestActivatedSwitch/area_trigger/dialog_interaction"]
script = ExtResource("9_71jsi")
text = "Where am I now?"
npc_info = ExtResource("10_g5da4")
metadata/_custom_type_script = "uid://6rr3xn6vbfwp"

[node name="DialogText2" type="Node" parent="QuestActivatedSwitch/area_trigger/dialog_interaction"]
script = ExtResource("9_71jsi")
text = "This is not our house. It's unfamilliar place."
npc_info = ExtResource("10_g5da4")
metadata/_custom_type_script = "uid://6rr3xn6vbfwp"

[node name="DialogText3" type="Node" parent="QuestActivatedSwitch/area_trigger/dialog_interaction"]
script = ExtResource("9_71jsi")
text = "Who's that girl I was just chased?"
npc_info = ExtResource("10_g5da4")
metadata/_custom_type_script = "uid://6rr3xn6vbfwp"

[node name="DialogText4" type="Node" parent="QuestActivatedSwitch/area_trigger/dialog_interaction"]
script = ExtResource("9_71jsi")
text = "Is she really my mom?"
npc_info = ExtResource("10_g5da4")
metadata/_custom_type_script = "uid://6rr3xn6vbfwp"

[node name="DialogText5" type="Node" parent="QuestActivatedSwitch/area_trigger/dialog_interaction"]
script = ExtResource("9_71jsi")
text = "Why does she ignore me?"
npc_info = ExtResource("10_g5da4")
metadata/_custom_type_script = "uid://6rr3xn6vbfwp"

[node name="DialogText6" type="Node" parent="QuestActivatedSwitch/area_trigger/dialog_interaction"]
script = ExtResource("9_71jsi")
text = "[shake]The cabinet is closed and just looked like a normal cabinet now.[/shake]"
npc_info = ExtResource("10_g5da4")
metadata/_custom_type_script = "uid://6rr3xn6vbfwp"

[node name="DialogText7" type="Node" parent="QuestActivatedSwitch/area_trigger/dialog_interaction"]
script = ExtResource("9_71jsi")
text = "[shake]How can I go back now.[/shake]"
npc_info = ExtResource("10_g5da4")
metadata/_custom_type_script = "uid://6rr3xn6vbfwp"

[node name="quest_advance_trigger" parent="QuestActivatedSwitch/area_trigger/dialog_interaction" instance=ExtResource("13_g5da4")]
position = Vector2(-79, -646)
signal_name = "finished"
linked_quest = ExtResource("7_g5da4")
settings_summary = "UPDATE QUEST:
 Quest: Where am I?
Step: 0 - N/A
Complete: false"

[node name="wall" type="StaticBody2D" parent="."]
position = Vector2(-72, 810)
collision_layer = 16

[node name="CollisionShape2D" type="CollisionShape2D" parent="wall"]
position = Vector2(0, -8)
shape = SubResource("RectangleShape2D_r1kyu")

[editable path="QuestActivatedSwitch2/LevelTransition"]
